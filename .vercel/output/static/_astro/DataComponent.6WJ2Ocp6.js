import{d as w,c as d,a as n,t as l,b as r,r as u,o as k,e as p}from"./runtime-core.esm-bundler.Bhw6A5QG.js";const x=(i,o)=>{const a=i.__vccOpts||i;for(const[t,s]of o)a[t]=s;return a},_=w({__name:"DataComponent",setup(i,{expose:o}){o();const a=u(null),t=u(null),s=u(null),g=u(!0);console.log("DataComponent loaded");const f=async()=>{try{const e=await fetch("https://api.ipify.org?format=json");if(!e.ok)throw new Error("Network response was not ok");const y=await e.json();a.value=y.ip,console.log(a.value)}catch(e){s.value=e.message}finally{g.value=!1}},c=async()=>{if(a.value)try{const e=await fetch(`https://ipapi.co/${a.value}/json/`);if(!e.ok)throw new Error("Network response was not ok");t.value=await e.json()}catch(e){s.value=e.message}},v=async()=>{t.value&&a.value&&await fetch("/api/log-ip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:a.value,pais:t.value.country_name,region:t.value.region,ciudad:t.value.city,latitud:t.value.latitude,longitud:t.value.longitude,zona:t.value.timezone})})};k(async()=>{await f(),await c(),await v()});const m={ip:a,data:t,error:s,loading:g,fetchData:f,fetchGeoData:c,logData:v};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),D={class:"p-4 hidden"},C={key:0},P={key:1,class:"text-red-600"},b={key:2};function j(i,o,a,t,s,g){return p(),d("div",D,[o[8]||(o[8]=n("h2",{class:"text-xl font-bold mb-4"},"Información de tu IP",-1)),t.loading?(p(),d("div",C,"Cargando información...")):t.error?(p(),d("div",P,l(t.error),1)):(p(),d("div",b,[n("p",null,[o[0]||(o[0]=n("strong",null,"IP:",-1)),r(" "+l(t.ip),1)]),n("p",null,[o[1]||(o[1]=n("strong",null,"País:",-1)),r(" "+l(t.data.country_name),1)]),n("p",null,[o[2]||(o[2]=n("strong",null,"Región:",-1)),r(" "+l(t.data.region),1)]),n("p",null,[o[3]||(o[3]=n("strong",null,"Ciudad:",-1)),r(" "+l(t.data.city),1)]),n("p",null,[o[4]||(o[4]=n("strong",null,"Proveedor (ISP):",-1)),r(" "+l(t.data.org),1)]),n("p",null,[o[5]||(o[5]=n("strong",null,"Latitud:",-1)),r(" "+l(t.data.latitude),1)]),n("p",null,[o[6]||(o[6]=n("strong",null,"Longitud:",-1)),r(" "+l(t.data.longitude),1)]),n("p",null,[o[7]||(o[7]=n("strong",null,"Zona Horaria:",-1)),r(" "+l(t.data.timezone),1)])]))])}const N=x(_,[["render",j]]);export{N as default};
